\chapter{Source of magnetic field}
\label{chapter:magneticsource}
In this chapter, we develop the tools to model the magnetic field that is produced by an electric current. 

\begin{learningObjectives}{
 \item Understand how to apply the Biot-Savart Law to determine the magnetic field from an electric current.
 \item Understand how to apply \amperes Law.
 \item Understand how to model a solenoid.
 }
\end{learningObjectives}

\begin{opening}
\begin{MCquestion}{QUESTION }
\item a choice
\item another choice \correct
\end{MCquestion}
\end{opening}

\section{The Biot-Savart Law}
The Biot-Savart law allows us to determine the magnetic field at some position in space that is due to an electric current. More precisely, the Biot-Savart law allows us to calculate the infinitesimal magnetic field, $d\vec B$, that is created by a small section of wire, $d\vec l$, carrying current, $I$:
\begin{align*}
\Aboxed{d\vec B = \frac{\mu_0 I}{4\pi}\frac{d\vec l\times \hat r}{r^2}}
\end{align*}
where, $\vec r$, is the vector from the element of wire, $d\vec l$, to the point where we would like to determine the magnetic field, as illustrated in Figure \ref{fig:magneticsource:biotsavart}. $\mu_0$ is a constant of proportionality called the ``permeability of free space'', and has the value $\mu_0=\SI{4\pi e-7}{T\cdot m/A}$.
\capfig{0.4\textwidth}{figures/MagneticSource/biotsavart.png}{\label{fig:magneticsource:biotsavart}The infinitesimal magnetic field, $d\vec B$, that is created by an infinitesimal section of wire, $d\vec l$, carrying current $I$.}

The Biot-Savart Law has some similarities with the Coulomb Law to calculate the electric field, as the magnitude of the magnetic field decreases as the inverse of the square distance between the source and the field. However, it can only be expressed in differential form (i.e. as an infinitesimal), and it requires working in three dimensions, because of the cross product. It is usually more convenient to use the Biot-Savart Law in the form:
\begin{align*}
d\vec B = \frac{\mu_0 I}{4\pi}\frac{d\vec l\times \vec r}{r^3}
\end{align*}
where the unit vector $\hat r$ was replaced by $\vec r/r$.

The procedure for applying the Biot-Savart Law is as follows:
\begin{enumerate}
\item Make a really good diagram, as you will have to include some 3D aspects.
\item Choose an infinitesimal section of wire, $d\vec l$.
\item Determine the vector $\vec r$.
\item Determine the cross-product, $d\vec l \times \vec r$, which will point in the direction of the magnetic field from that infinitesimal section of wire.
\item Write out the infinitesimal vector $d\vec B$, and determine its components.
\item Think about symmetry! As you sum the $d\vec B$, will some components cancel? If yes, you do not need to do those integrals.
\item Determine the total magnetic field, component by component, by summing (integrating) the components of $d\vec B$ over the wire.
\end{enumerate}

\subsection{Magnetic field from a straight current-carrying wire}
In this section, we use the Biot-Savart Law to determine the magnetic field a distance, $h$, from the centre of a straight wire carrying current, $I$, as illustrated in Figure \ref{fig:magneticsource:bswire}.
\capfig{0.6\textwidth}{figures/MagneticSource/bswire.png}{\label{fig:magneticsource:bswire}Setting up the model to use the Biot-Savart Law to calculate the magnetic field a distance $h$ from the centre of a current-carrying wire of length $L$.}

We start by choosing an infinitesimal element of wire, $d\vec l$, a distance $y$ above the centre of the wire, as shown (we choose the origin to be located at the centre of the wire). The vector $d\vec l$ is thus given by:
\begin{align*}
d\vec l = dl\hat y
\end{align*}
The vector, $\vec r$, from $d\vec l$ to the point at which we would like to know the magnetic field is given by:
\begin{align*}
\vec r &= r\cos\theta\hat x -r\sin\theta\hat y\\
r &=\sqrt{h^2+y^2} =\frac{h}{\cos\theta}
\end{align*}
The cross-product between $d\vec l$ and $\vec r$ is easily found with the right-hand rule to point into the page (corresponding to the negative $z$ direction). The magnitude of the cross-product is given by:
\begin{align*}
||d\vec l \times \vec r||=dl r \sin\phi
\end{align*}
where $\phi=\pi/2+\theta$ is the angle between $d\vec l$ and $\vec r$, so that $\sin\phi=\cos\theta$. The cross-product can thus be written in terms of $\theta$ as:
\begin{align*}
d\vec l \times \vec r=-dl r \cos\theta \hat z
\end{align*}
Note that we can also determine the cross-product algebraically instead of using the right-hand rule and the magnitude:
\begin{align*}
d\vec l \times \vec r &= (dl\hat y) \times (r\cos\theta\hat x -r\sin\theta\hat y)\\
&=dlr\cos\theta (\hat y \times\hat x) - rdl\sin\theta(\hat y \times \hat y)\\
&=-dlr\cos\theta \hat z 
\end{align*}
The infinitesimal magnetic field element, $d\vec B$, is given by:
\begin{align*}
d\vec B = \frac{\mu_0 I}{4\pi}\frac{d\vec l\times \vec r}{r^3}=-\frac{\mu_0 I}{4\pi}\frac{dl\cos\theta}{r^2}\hat z
\end{align*}
Any segment along the wire will result in a magnetic field that is into the page (negative $z$ direction), thus there will be no cancellations due to any symmetries. We can now proceed to perform the integral. The two obvious choices of variable to use to label each segment for the integration are $\theta$ and $y$. We will choose to integrate over $\theta$, requiring us to express $dl$ and $r$ in terms of $\theta$ and constants (as those are the only quantities in the integrand that change with $\theta$). In order to express $dl$ in terms of $d\theta$, we first relate $\theta$ to $y$, the position of the wire element:
\begin{align*}
y = h\tan\theta\quad \to \quad
dl = dy = \frac{dy}{d\theta}d\theta = \frac{h}{\cos^2\theta}d\theta
\end{align*}
whereas $r$ is given by:
\begin{align*}
r=\frac{h}{\cos\theta}\quad \to \quad
\frac{1}{r^2}&=\frac{\cos^2\theta}{h^2}
\end{align*}
Putting this altogether into $d\vec B$:
\begin{align*}
d\vec B &=-\frac{\mu_0 I}{4\pi}\frac{dl\cos\theta}{r^2}\hat z = -\frac{\mu_0 I}{4\pi}\left(\frac{h}{\cos^2\theta}d\theta\right) \left( \frac{\cos^2\theta}{h^2} \right)\cos\theta\hat z=-\frac{\mu_0 I}{4\pi h}\cos\theta d\theta \hat z=dB_z\hat z
\end{align*}
We can define the angle, $\theta_0$, to be the maximum amplitude of the angle $\theta$ when integrating over the wire (see Figure \ref{fig:magneticsource:bswire}):
\begin{align*}
B_z&=\int_{-\theta_0}^{+\theta_0}dB_z= -\frac{\mu_0 I}{4\pi h} \int_{-\theta_0}^{+\theta_0}\cos\theta d\theta=-\frac{\mu_0 I}{4\pi h}(2\sin\theta_0) =-\frac{\mu_0 I}{2\pi h}\sin\theta_0
\end{align*}
Using the given dimensions:
\begin{align*}
\sin\theta_0&=\frac{L/2}{\sqrt{h^2+\frac{L^2}{4}}}\\
\end{align*}
Thus, the magnetic field, $\vec B$, a distance, $h$, from the centre of a wire of length, $L$, carrying current, $I$, is given by:
\begin{align*}
\Aboxed{\vec B &= -\frac{\mu_0 I}{2\pi h}\frac{L/2}{\sqrt{h^2+\frac{L^2}{4}}}\hat z}\quad\text{(finite wire)}
\end{align*}
The magnetic field must be rotationally symmetric; that is, if the wire is vertical, the magnetic field at a distance $h$ must look the same regardless of the angle from which we view the vertical wire (we should always see the magnetic field going into the page at the point that we use in Figure \ref{fig:magneticsource:bswire}). Thus, the magnetic field lines form circles around the wire, as illustrated in Figure \ref{fig:magneticsource:wirefield}. Note that the direction of the magnetic field is given by the right-hand rule for axial vectors; when you align your thumb with the current, your fingers curl in the direction of the magnetic field.
%TODO I think this figure can be improved (or changed to be from a different angle), as the field circles don't quite look like they live in the plane.
\capfig{0.4\textwidth}{figures/MagneticSource/wirefield.png}{\label{fig:magneticsource:wirefield}The magnetic field from a current-carrying wire forms concentric circles centred on the wire.}

It is of particular interest to investigate the limiting case of an infinitely long wire, in the limit of $L\to\infty$, or equivalently, $\theta_0\to\frac{\pi}{2}$. The latter is easiest to evaluate, since $\sin\theta_0\to 1$. The magnetic field, $\vec B$, a distance, $h$, from an infinite wire carrying current, $I$, is given by:
\begin{align*}
\Aboxed{\vec B &= -\frac{\mu_0 I}{2\pi h}}\quad\text{(infinite wire)}
\end{align*}
In general, one can often make the approximation that the wire is infinite in length, when the distance $h$, is small compared to the length of the wire. 
\subsection{Magnetic field from circular current-carrying wire}
In this section, we examine the magnetic field that is created by a circular current carrying wire. We can determine the shape of the magnetic field, by considering small sections of current as straight wires, that have circular magnetic field lines around them. As we move closer to the centre of the ring, those fields sum together in, as illustrated in Figure \ref{fig:magneticsource:ringfield}. Note that the magnetic field from a ring of current, is very similar to that from a bar magnet (in particular, in the plane perpendicular to the ring that goes through its centre).   
\capfig{0.4\textwidth}{figures/MagneticSource/ringfield.png}{\label{fig:magneticsource:ringfield}The magnetic field from a current-carrying loop of wire can be thought of as the sum of the field from small straight sections of wire.}
Below, we use the Biot-Savart Law to derive an expression for the magnitude of the magnetic field at a distance, $h$, from the centre of a ring of radius, $R$, along its axis of symmetry. While the mathematics are much easier than the case for the straight wire, the challenge in this case is to visualize the calculation in three dimensions! Figure \ref{fig:magneticsource:bsring} shows the loop of current, as well as our choice of coordinate system. In particular, we wish to calculate the magnetic field at a distance, $h$, along the $z$ axis. The $x$ axis goes into the page. 
\capfig{0.4\textwidth}{figures/MagneticSource/bsring.png}{\label{fig:magneticsource:bsring}Diagram to apply the Biot-Savart Law in order to determine the magnetic field along the symmetry axis of a ring carrying current, $I$. The $x$ axis goes into the page.}
In order to apply the Bio-Savart Law, we choose an element, $d\vec l$, of wire at the top of the ring, as illustrated. At this position, the element, $d\vec l$, points in the positive $x$ direction (into the page):
\begin{align*}
d\vec l = dl \hat x
\end{align*}
The vector, $\vec r$, from the wire element to the point where we wish to determine the magnetic field is given by:
\begin{align*}
\vec r =  - r\sin\theta \hat y+r\cos\theta \hat z
\end{align*}
and the angle $\theta$ will be the same for all wire elements along the ring. Their cross-product can be evaluated algebraically:
\begin{align*}
d\vec l \times \vec r &= (dl \hat x) \times ( - r\sin\theta \hat y+r\cos\theta \hat z)\\
&=-rdl\sin\theta (\hat x \times \hat y) + rdl\cos\theta (\hat x \times \hat z)\\
&=-rdl\sin\theta\hat z + rdl\cos\theta (-\hat y)\\
&=-rdl\sin\theta\hat z - rdl\cos\theta \hat y 
\end{align*}
so that the element of magnetic field, $d\vec B$, corresponding to that choice of $d\vec l$, will lie in the $y-z$ plane, as illustrated in Figure \ref{fig:magneticsource:bsring}. Note that the vector $d\vec B$ is perpendicular to the vector $\vec r$ (since it is the cross-product of $\vec r$ with another vector). The magnetic field element, $d\vec B$, is given by:
\begin{align*}
d\vec B &= \frac{\mu_0 I}{4\pi}\frac{d\vec l\times \vec r}{r^3}= \frac{\mu_0 I}{4\pi r^3}(-rdl\sin\theta\hat z - rdl\cos\theta \hat y )\\
&=\frac{\mu_0 I}{4\pi r^2}(-dl\sin\theta \hat z - dl\cos\theta \hat y)=dB_z\hat z + dB_y \hat y
\end{align*}

As the wire element, $d\vec l$, moves around the circle, the resulting magnetic field element traces a circle centred on the $z$ axis, as illustrated in Figure \ref{figanim:magneticsource:bsring}. Note that a modern PDF viewer is required in order to view this animated figure. Thus, only the $z$ component of the magnetic field will not be cancelled as we sum together the magnetic field elements that come from the different wire elements.
%TODO Let's try to improve this figure, maybe from a different angle, and probably 8 steps instead of 4.
%\begin{center}
%\animategraphics[autoplay, loop, type=png, width=0.3\textwidth]{1}{figures/MagneticSource/bsring_}{1}{4}
%\captionof{figure}{\label{figanim:magneticsource:bsring} Note: A modern PDF viewer is required to view this animated figure. As the wire element moves around the ring, the tip of the magnetic field element vector traces out a circle. Thus, only the (negative) $z$ component of the magnetic field will not get cancelled when the $d\vec B$ are summed together.}
%\end{center}
The total magnetic field will be in the negative $z$ direction, as anticipated from Figure \ref{fig:magneticsource:ringfield}. Summing together the $z$ components of the infinitesimal magnetic fields:
\begin{align*}
dB_z &= -\frac{\mu_0 I}{4\pi r^2}dl\sin\theta\\
B_z &= \int dB_z =-\int \frac{\mu_0 I}{4\pi r^2}dl\sin\theta
\end{align*}
Note that in this case, both $r$ and $\theta$ are constant for all of the $d\vec l$, allowing us to take them out of the integral. The integral is then just a sum of the $dl$ elements, which must add up to the circumference of the ring:
\begin{align*}
B_z &= \int dB_z = -\frac{\mu_0 I}{4\pi r^2}\sin\theta \int_0^{2\pi R} dl=-\frac{\mu_0 I}{4\pi r^2}\sin\theta (2\pi R)=-\frac{\mu_0 I}{2r^2}R\sin\theta
\end{align*}
In terms of the variables that we are given:
\begin{align*}
r &= \sqrt{R^2+h^2}\\
\sin\theta &=\frac{R}{r}=\frac{R}{\sqrt{R^2+h^2}}\\
\therefore \Aboxed{\vec B &= -\frac{\mu_0 I}{2} \frac{R^2}{(R^2+h^2)^\frac{3}{2}} \hat z}\quad\text{(field from a loop of current)}
\end{align*}
In this case, the math was relatively straightforward (no substitutions to evaluate the integral), however it is challenging to visualize the problem in three dimensions.

\section{Force between two current-carrying wires}
Consider two infinite parallel straight wires, a distance $h$ apart, carrying upwards currents, $I_1$ and $I_2$, respectively, as illustrated in Figure \ref{fig:magneticsource:twowires}.
\capfig{0.4\textwidth}{figures/MagneticSource/twowires.png}{\label{fig:magneticsource:twowires}Two parallel current-carrying wires will exert an attractive force on each other, if their currents are in the same direction.}
The first wire will create a magnetic field, $\vec B_1$, in the shape of circles concentric with the wire. At the position of the second wire, the magnetic field $B_1$ is into the page, and has a magnitude:
\begin{align*}
B_1 = \frac{\mu_0 I_1}{2\pi h}
\end{align*} 
Since the second wire carries a current, $I_2$, it will experience a magnetic force, $\vec F_2$, from the magnetic field, $B_1$, that is towards the left (as illustrated in Figure \ref{fig:magneticsource:twowires} and determined from the right-hand rule). The magnetic force, $\vec F_2$, exerted on a section of length, $l$, on the second wire has a magnitude given by:
\begin{align*}
F_2 = I_2 ||\vec l \times \vec B_1||=I_2 l B_1 =\frac{\mu_0 I_2 I_1 l}{2\pi h}
\end{align*}
where we used the fact that the angle between $\vec l$ and $\vec B$ is $\SI{90}{\degree}$. We expect, from Newton's Third Law, that an equal and opposite force should be exerted on the first wire. Indeed, the second wire will also create a magnetic field, $\vec B_2$, that is out of the page at the location of the first wire, with magnitude:
\begin{align*}
B_2 = \frac{\mu_0 I_2}{2\pi h}
\end{align*}
This leads to a magnetic force, $\vec F_1$, exerted on the first wire, that points to the right (from the right-hand rule). On a section of length, $l$, of the first wire, the magnetic force from the magnetic field, $\vec B_2$, has magnitude:
\begin{align*}
F_1 = I_1 ||\vec l \times \vec B_2||=I_1 l B_2 =\frac{\mu_0 I_1 I_2}{2\pi h}
\end{align*}
which does indeed have the same magnitude as the force exerted on the second wire. Thus, when two parallel wires carry current in the same direction, they exert attractive forces on each other. 
%TODO Checkpoint MC: When two parallel wires carry current in opposite direction, the force between the wires is: attractive/repulsive(correct)/neither?


The attractive force between two wires used to be the basis for defining the \ampere, the S.I. (base) unit for electric current. Before 2019, the \amperesp was defined to be ``that constant current which, if maintained in two straight parallel conductors of infinite length, of negligible circular cross-section, and placed one metre apart in vacuum, would produce between these conductors a force equal to $\SI{2e-17}{N}$ per metre of length''. Recently, the definition was updated to be based on defining the Coulomb in such a way that the elementary charge has a numerical value of $e=\SI{1.602176634e-19}{C}$, so that the \amperesp corresponds to one Coulomb per second.

\section{\amperes Law}

%The Law
%Field from an infinite wire
%Field in a solenoid
%Field in a toroid

\newpage
\section{Summary}

\begin{chapterSummary}
 Something that was learned
\end{chapterSummary}

\newpage
\begin{importantEquations}
\medskip
\begin{multicols}{2}
\textbf{Momentum of a point particle:}
\begin{align*}
\vec p = m\vec v \\
\frac{d}{dt}\vec p = \sum \vec F = \vec F^{net}
\end{align*}
\columnbreak
\\
\textbf{Position of the Centre of Mass \\ of a system:}
\begin{align*}
\vec r_{CM} &=\frac{1}{M}\sum_i m_i\vec r_i 
\end{align*}
\medskip
\end{multicols}
\end{importantEquations}

\newpage
\section{Thinking about the material}

\begin{chapteractivity}{Reflect and research}
{
\item Explain
}
\end{chapteractivity}

\begin{chapteractivity}{To try at home}
{
\item Try
}
\end{chapteractivity}

\begin{chapteractivity}{To try in the lab}
{
\item (Simulation) Calculate the magnetic field from a loop of current at all positions in space (not only on the axis of symmetry). 
}
\end{chapteractivity}

\newpage
\section{Sample problems and solutions}
\subsection{Problems}
\begin{problem}{soln:template:ballistic}{\label{prob:template:ballistic} 

}
\end{problem}

\newpage
\subsection{Solutions}
\begin{solution}{prob:template:ballistic}\label{soln:template:ballistic}

\end{solution}

